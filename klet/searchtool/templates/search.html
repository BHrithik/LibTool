{%  extends 'main.html' %}

{% block content %}
<head>
	<meta charset="UTF-8">
	<title>Bootstrap Datatable | Webdevtrick.com</title>
	<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.12/css/dataTables.bootstrap.min.css'>
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"/>
	<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,500" rel="stylesheet"/>
	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/>
</head>
<div class="col-lg-10">
	<div class="row" id="welcomeDiv"  style="display:none;">
		<div class="col">
			<div class="card card-body">
				<form method="get">
					<div class="form-group">
						{{myFilter.form}}
					</div>
					<button class="btn btn-primary" type="submit">
						Search
					</button>
				</form>
			</div>
		</div>
		<br>
	</div>
	<div class="row">
		<div class="col-md">
			<div class="card card-body" >
				<table class="table responsive" id="sort" cellspacing="0" width="100%">
					<thead>
						<tr>
							<th>Genre</th>
							<th>Author</th>
							<th>Author(Eng)</th>
							<th>Translation Title</th>
							<th>Translator</th>
							<th>Source</th>
							<th>Year</th>
							<th>Publisher</th>
							<th style="display: none;">authorEnglish2</th>
						</tr>
					</thead>
					<tbody>
						{% for record in records %}
						<tr>
							{% if record.genre == "nan" %}
							<td></td>
							{% else %}
							<td>{{record.genre}}</td>
							{% endif %}	

							{% if record.authorKorean == "nan" %}
							<td></td>
							{% else %}
							<td>{{record.authorKorean}}</td>
							{% endif %}			
							
							{% if record.authorEnglish == "nan" %}
							<td></td>
							{% else %}
							<td>{{record.authorEnglish}}</td>
							{% endif %}	

							{% if record.workTitle == "nan" %}
							<td></td>
							{% else %}
							<td>{{record.workTitle}}</td>
							{% endif %}	

							{% if record.translator == "nan" %}
							<td></td>
							{% else %}
							<td>{{record.translator}}</td>
							{% endif %}	
							
							{% if record.sourceTitle == "nan" %}
							<td></td>
							{% else %}
							<td>{{record.sourceTitle}}</td>
							{% endif %}	
							{%if record.year == "nan" %}
							<td></td>
							{% else %}
							<td>{{record.year}}</td>
							{% endif %}	
							{%if record.publisher == "nan" %}
							<td></td>
							{% else %}
							<td>{{record.publisher}}</td>
							{% endif %}	
							<td style="display: none;">{{record.authorEnglish2}}</td>
						</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
		</div>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.12/js/jquery.dataTables.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.12/js/dataTables.bootstrap.min.js"></script>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.0/moment.min.js'></script>
		<script  src="function.js"></script>
	</div>
</div>
<div class="col-lg-2">
	<div class="row">
		<button type="button" id="AdvSearch" class="btn btn-primary" onclick="showDiv()">Advanced Search</button>
		<div class="col">
			<h4>Authors Korean</h4>
			<div class="card card-body overflow-auto" style="height: 300px;">
				<ul>
					{% for krName in NamesKr %}
						<li><a href="{% url 'search' %}?authorKorean={{krName}}">{{krName}}</a></li>
					{% endfor %}
				</ul>
			</div>
			<h4>Authors English</h4>
			<div class="card card-body overflow-auto" style="height: 300px;margin-bottom: 25px;">
				<ul>
					{% for engName in NamesEng %}
						<li><a href="{% url 'search' %}?authorEnglish2={{engName}}">{{engName}}</a></li>
					{% endfor %}
				</ul>
			</div>
		</div>
		<dialog> <p>{{newRecordForm}}</p> <button id="close">Exit</button> </dialog> <button id="show">New Record</button>
	</div>
</div>
<script>
$(document).ready(function() {
   $("#sort").DataTable();
   document.getElementsByClassName("form-control").style="width:500px;background-color:#CBDCFF";
   document.getElementsByClassName("form-control-sm").style="width:500px;background-color:#CBDCFF";
   document.getElementsByClassName("form-control").placeholder="Search for any key word";
   document.getElementsByClassName("form-control-sm").placeholder="Search for any key word";
});
function showDiv() {
	if(document.getElementById('welcomeDiv').style.display == "none")
	{
		document.getElementById('welcomeDiv').style.display = "block";
		document.getElementById('AdvSearch').className="btn btn-secondary";
		document.getElementById('AdvSearch').innerHTML="Search";
	}
	else
	{
		document.getElementById('welcomeDiv').style.display = "none";
		document.getElementById('AdvSearch').className="btn btn-primary";
	}
}
var dialog = document.querySelector('dialog'); 
document.querySelector('#show').onclick = function() { dialog.show(); };
document.querySelector('#close').onclick = function() { dialog.close(); };
</script>
{% endblock %}